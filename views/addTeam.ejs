<%- include('partials/header', {title: 'Add Team Members', username, roles}) %>

<div class="container">

  <h1>Add Team Members</h1>
  <form action="/projects/teams/<%= project.id %>" method="post">
    <% if (messages.error) { %>
      <div class="notification notification-warning">
        <%= messages.error %>
      </div>
    <% } %>
    <label for="EmployeeId">Team Member</label>
    <select name="EmployeeId">
      <%employees.forEach(el =>{ %> 
      <option value="<%= el.id %>"> <%= el.name %> </option>
      <% }) %> 
  </select>

  <div>
    <input type="checkbox" name="isLeader">
    <label for="isLeader">Leader</label>
  </div>

  <div class="actions">

    <button type="submit" class="button">Add Member</button>
  </div>
</form>
<h2 >Team Members</h2>

<table>
  <thead>
    <tr>
      <td>No</td>
      <td>Name</td>
      <td>Status</td>
      <td>Actions</td>
    </tr>
  </thead>
  <tbody>
    <% members.forEach((el,i) => { %> 
      <tr>
        <td><%= i+1 %> </td>
        <td><%= el.Employee.name %> </td>
        <% if (el.isLeader) { %>
        <td>Team Leader</td>
        <% } else {%>
          <td>Member</td> 
        <% } %>
        <td>
          <div class="actions">

            <button class="button button-danger" onclick="window.location.href = '/projects/removeMember/<%= project.id %>/<%= el.Employee.id %>'">Remove</button>
            <button class="button">Show in Map</button>
            <button class="button">Chat</button>
          </div>
        </td>
    </tr>
    <% }) %> 
  </tbody>
</table>
  
</div>
</body>
</html>